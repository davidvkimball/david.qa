/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var D=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var N=(h,g)=>{for(var e in g)D(h,e,{get:g[e],enumerable:!0})},Q=(h,g,e,t)=>{if(g&&typeof g=="object"||typeof g=="function")for(let i of P(g))!A.call(h,i)&&i!==e&&D(h,i,{get:()=>g[i],enumerable:!(t=M(g,i))||t.enumerable});return h};var z=h=>Q(D({},"__esModule",{value:!0}),h);var K={};N(K,{default:()=>b});module.exports=z(K);var u=require("obsidian");var L={propertyKey:"title",enableForLinking:!0,enableForQuickSwitcher:!0,includeFilenameInSearch:!0,includeAliasesInSearch:!0,enableForDragDrop:!0};var v=require("obsidian");function w(h,g){let e=0,t=h.toLowerCase(),i=g.toLowerCase();for(let n of i)if(e=t.indexOf(n,e)+1,e===0)return!1;return!0}function E(h,g,e,t){let i=0,n=h.toLowerCase(),s=e.toLowerCase(),r=g.toLowerCase();n===r?i+=1e3:s===r?i+=900:n.startsWith(r)?i+=100:t&&s.startsWith(r)?i+=80:n.includes(r)?i+=50:t&&s.includes(r)&&(i+=30);let a=new RegExp(`\\b${r}`,"i");a.test(n)&&(i+=20),t&&a.test(s)&&(i+=15);let o=Math.max(0,(h.length-g.length)*.1);return i-=o,Math.max(0,i)}function S(h,g,e){let t=new Map;return h.forEach(i=>{let n=g.getFileCache(i),s=n==null?void 0:n.frontmatter,r=i.basename,a=!1,o=[];if(s&&s[e]!==void 0&&s[e]!==null){let l=String(s[e]).trim();l!==""&&(r=l,a=!0)}s!=null&&s.aliases&&(o=Array.isArray(s.aliases)?s.aliases:[s.aliases],o=o.map(l=>String(l).trim()).filter(l=>l!=="")),t.set(i.path,{file:i,displayName:r,aliases:o,lastModified:i.stat.mtime,isCustomDisplay:a})}),t}var F=class extends v.EditorSuggest{constructor(e){super(e.app);this.fileCache=new Map;this.searchTimeout=null;this.plugin=e,this.buildFileCache()}open(){super.open();let e=this.suggestEl;if(e&&(e.addClass("property-over-filename-suggestion"),!e.querySelector(".prompt-instructions"))){let t=e.createDiv({cls:"prompt-instructions"});t.createDiv({cls:"prompt-instruction"}).setText("Type # to link heading"),t.createDiv({cls:"prompt-instruction"}).setText("Type ^ to link blocks"),t.createDiv({cls:"prompt-instruction"}).setText("Type | to change display text")}this.addKeyboardNavigation()}addKeyboardNavigation(){let e=this.suggestEl;e&&e.addEventListener("keydown",t=>{t.key==="Escape"&&(this.close(),t.preventDefault(),t.stopPropagation())})}onTrigger(e,t,i){if(!this.plugin.settings.enableForLinking)return null;let n=t.getLine(e.line).substring(0,e.ch),s=/\[\[([^#^|\]]*)$/.exec(n);return s?{start:{line:e.line,ch:n.lastIndexOf("[[")},end:e,query:s[1]}:null}buildFileCache(){this.fileCache=S(this.app.vault.getMarkdownFiles(),this.app.metadataCache,this.plugin.settings.propertyKey)}updateFileCache(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=e.basename,s=!1,r=[];if(i&&i[this.plugin.settings.propertyKey]!==void 0&&i[this.plugin.settings.propertyKey]!==null){let a=String(i[this.plugin.settings.propertyKey]).trim();a!==""&&(n=a,s=!0)}i!=null&&i.aliases&&(r=Array.isArray(i.aliases)?i.aliases:[i.aliases],r=r.map(a=>String(a).trim()).filter(a=>a!=="")),this.fileCache.set(e.path,{file:e,displayName:n,aliases:r,lastModified:e.stat.mtime,isCustomDisplay:s})}getSuggestions(e){let t=e.query.trim();return this.performSearch(t)}performSearch(e){let t=[],i=new Set;for(let n of this.fileCache.values()){let{file:s,displayName:r,aliases:a,isCustomDisplay:o}=n,l=!e||w(r,e);this.plugin.settings.includeFilenameInSearch&&(l=l||w(s.basename,e)),this.plugin.settings.includeAliasesInSearch&&a.length>0&&(l=l||a.some(c=>w(c,e))),l&&(t.push({file:s,display:r,isCustomDisplay:o}),i.add(s.basename.toLowerCase()))}return t.length===0&&e&&t.push({display:"No match found",isCustomDisplay:!1,isNoMatch:!0}),this.sortSuggestions(t,e)}sortSuggestions(e,t){return e.sort((i,n)=>{var a,o,l,c;let s=E(i.display,t,(o=(a=i.file)==null?void 0:a.basename)!=null?o:"",this.plugin.settings.includeFilenameInSearch);return E(n.display,t,(c=(l=n.file)==null?void 0:l.basename)!=null?c:"",this.plugin.settings.includeFilenameInSearch)-s||i.display.localeCompare(n.display)})}renderSuggestion(e,t){if(t.empty(),e.isNoMatch){t.setText(e.display);return}if(e.file){let i=this.isUsingCustomProperty(e.file),n=this.isUsingAlias(e.file);if(i||n){t.addClass("mod-complex");let s=t.createDiv({cls:"suggestion-content"});s.createDiv({cls:"suggestion-title"}).setText(e.display),s.createDiv({cls:"suggestion-note"}).setText(e.file.path.replace(".md",""));let l=t.createDiv({cls:"suggestion-aux"}).createSpan({cls:"suggestion-flair",attr:{"aria-label":n?"Alias":"Custom Property"}});n?l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-forward"><polyline points="15 17 20 12 15 7"></polyline><path d="M4 18v-2a4 4 0 0 1 4-4h12"></path></svg>':l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-type"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>'}else{let s=t.createDiv({cls:"suggestion-content"});s.createDiv({cls:"suggestion-title",text:e.display}),s.createDiv({cls:"suggestion-note",text:e.file.path.replace(".md","")})}}}isUsingCustomProperty(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=i==null?void 0:i[this.plugin.settings.propertyKey];return n!=null&&String(n).trim()!==""}isUsingAlias(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=i==null?void 0:i.aliases;return n?!this.isUsingCustomProperty(e)&&n:!1}async selectSuggestion(e,t){var f;if(e.isNoMatch)return;let i=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(!i||!this.context)return;let n=i.editor,{start:s,end:r}=this.context,a=n.getLine(s.line),o=r;a.slice(r.ch,r.ch+2)==="]]"&&(o={line:r.line,ch:r.ch+2});let l=(f=this.app.vault.getConfig("useMarkdownLinks"))!=null?f:!1,c;l?c=`[${e.display}](${encodeURI(e.file.path)})`:c=`[[${e.file.basename}|${e.display}]]`,n.replaceRange(c,{line:s.line,ch:s.ch},o);let p=s.ch+c.length;try{n.setCursor({line:s.line,ch:p})}catch(y){console.error("Error setting cursor:",y),new v.Notice("Error setting cursor position. Please check console for details.")}}};var d=require("obsidian");var k=class extends d.FuzzySuggestModal{constructor(e,t){super(e);this.fileCache=new Map;this.recentFiles=[];this.searchTimeout=null;this.plugin=t,this.limit=10,this.setPlaceholder("Type to search notes by title or filename..."),this.buildFileCache(),this.updateRecentFiles(),this.addKeyboardNavigation(),this.addFooter(),this.containerEl.addClass("property-over-filename-modal")}addKeyboardNavigation(){this.inputEl.addEventListener("keydown",e=>{e.key==="Escape"&&(this.close(),e.preventDefault(),e.stopPropagation())})}addFooter(){let e=this.containerEl.querySelector(".prompt");if(e){let t=e.createDiv({cls:"prompt-instructions"});t.innerHTML='<div class="prompt-instruction"><span class="prompt-instruction-command">\u2191\u2193</span><span>to navigate</span></div><div class="prompt-instruction"><span class="prompt-instruction-command">\u21B5</span><span>to open</span></div><div class="prompt-instruction"><span class="prompt-instruction-command">ctrl \u21B5</span><span>to open in new tab</span></div><div class="prompt-instruction"><span class="prompt-instruction-command">ctrl alt \u21B5</span><span>to open to the right</span></div><div class="prompt-instruction"><span class="prompt-instruction-command">shift \u21B5</span><span>to create</span></div><div class="prompt-instruction"><span class="prompt-instruction-command">esc</span><span>to dismiss</span></div>'}}buildFileCache(){this.fileCache=S(this.app.vault.getMarkdownFiles(),this.app.metadataCache,this.plugin.settings.propertyKey)}updateFileCache(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=e.basename,s=!1,r=[];if(i&&i[this.plugin.settings.propertyKey]!==void 0&&i[this.plugin.settings.propertyKey]!==null){let a=String(i[this.plugin.settings.propertyKey]).trim();a!==""&&(n=a,s=!0)}i!=null&&i.aliases&&(r=Array.isArray(i.aliases)?i.aliases:[i.aliases],r=r.map(a=>String(a).trim()).filter(a=>a!=="")),this.fileCache.set(e.path,{file:e,displayName:n,aliases:r,lastModified:e.stat.mtime,isCustomDisplay:s})}updateRecentFiles(){var i;let e=[],t=this.app.workspace;if((i=t.recentFileTracker)!=null&&i.getLastOpenFiles&&(e=t.recentFileTracker.getLastOpenFiles().map(s=>this.app.vault.getAbstractFileByPath(s)).filter(s=>s instanceof d.TFile).slice(0,10)),e.length===0){if(e=[...this.app.workspace.getLeavesOfType("markdown").map(s=>s.view).filter(s=>s instanceof d.MarkdownView).map(s=>s.file).filter(s=>s!==null).filter((s,r,a)=>a.indexOf(s)===r)],e.length<10){let s=this.app.vault.getMarkdownFiles(),r=10-e.length,a=s.filter(o=>!e.includes(o)).slice(0,r);e.push(...a)}e=e.slice(0,10)}this.recentFiles=e}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(e){return"isNewNote"in e?`Create new note: ${e.newName}`:this.getDisplayName(e)}getDisplayName(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=i==null?void 0:i[this.plugin.settings.propertyKey];if(n!=null){let s=String(n).trim();if(s!=="")return s}return e.basename}getSuggestions(e){if(!this.plugin.settings.enableForQuickSwitcher)return[];let t=e.trim();return this.searchTimeout&&clearTimeout(this.searchTimeout),t?this.performSearch(t):this.getRecentFilesResults()}getRecentFilesResults(){return this.updateRecentFiles(),this.recentFiles.map(e=>({item:e,match:{score:1e3,matches:[]}}))}performSearch(e){var n;let t=(0,d.prepareFuzzySearch)(e),i=[];for(let s of this.fileCache.values()){let{file:r,displayName:a,aliases:o}=s,l=this.getItemText(r),c=(n=t(l))!=null?n:{score:0,matches:[]},p=!1;this.plugin.settings.includeAliasesInSearch&&o.length>0&&(p=o.some(f=>w(f,e))),p&&c.matches.length===0?i.push({item:r,match:{score:-.1,matches:[[0,e.length]]}}):c.matches.length>0&&i.push({item:r,match:c})}try{i.sort((a,o)=>{let l=o.match.score-a.match.score;return l!==0?l:this.getItemText(a.item).localeCompare(this.getItemText(o.item))});let s=e.toLowerCase(),r=i.some(a=>{var o;return a.item instanceof d.TFile&&(this.getDisplayName(a.item).toLowerCase()===s||this.plugin.settings.includeFilenameInSearch&&a.item.basename.toLowerCase()===s||this.plugin.settings.includeAliasesInSearch&&((o=this.fileCache.get(a.item.path))==null?void 0:o.aliases.some(l=>l.toLowerCase()===s)))});if(i.length===0){let a={isNewNote:!0,newName:e};i.push({item:a,match:{score:1e3,matches:[[0,e.length]]}})}return i.slice(0,this.limit)}catch(s){return console.error("Error generating suggestions:",s),new d.Notice("Error updating Quick Switcher suggestions. Please check console for details."),[]}}renderSuggestion(e,t){let{item:i}=e,n=this.getItemText(i);if("isNewNote"in i){t.addClass("mod-complex");let o=t.createDiv({cls:"suggestion-content"}).createDiv({cls:"suggestion-title"});o.setText(n),o.setAttr("data-new-note","true");let c=t.createDiv({cls:"suggestion-aux"}).createSpan({cls:"suggestion-flair",attr:{"aria-label":"Create new note"}});c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-file-plus"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14,2 14,8 20,8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>';return}let s=this.isUsingCustomProperty(i),r=this.isUsingAlias(i);if(s||r){t.addClass("mod-complex");let a=t.createDiv({cls:"suggestion-content"});a.createDiv({cls:"suggestion-title"}).setText(n),i instanceof d.TFile&&a.createDiv({cls:"suggestion-note"}).setText(i.path.replace(".md",""));let c=t.createDiv({cls:"suggestion-aux"}).createSpan({cls:"suggestion-flair",attr:{"aria-label":r?"Alias":"Custom Property"}});r?c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-forward"><polyline points="15 17 20 12 15 7"></polyline><path d="M4 18v-2a4 4 0 0 1 4-4h12"></path></svg>':c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-type"><polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line></svg>'}else i instanceof d.TFile?t.setText(i.path.replace(".md","")):t.setText(n)}isUsingCustomProperty(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=i==null?void 0:i[this.plugin.settings.propertyKey];return n!=null&&String(n).trim()!==""}isUsingAlias(e){let t=this.app.metadataCache.getFileCache(e),i=t==null?void 0:t.frontmatter,n=i==null?void 0:i.aliases;return n?!this.isUsingCustomProperty(e)&&n:!1}onChooseItem(e,t){"isNewNote"in e?this.app.vault.create(`${e.newName}.md`,"").then(i=>{this.app.workspace.getLeaf().openFile(i)}).catch(i=>{new d.Notice(`Error creating note: ${i.message}`)}):t instanceof KeyboardEvent?t.ctrlKey&&t.altKey?(this.app.workspace.splitActiveLeaf("horizontal"),this.app.workspace.getLeaf().openFile(e)):t.ctrlKey?this.app.workspace.getLeaf().openFile(e):t.shiftKey?this.app.workspace.getLeaf().openFile(e):this.app.workspace.getLeaf().openFile(e):this.app.workspace.getLeaf().openFile(e)}};var m=require("obsidian"),C=class extends m.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.addClass("property-over-filename-settings"),new m.Setting(e).setName("Property key").setDesc("The property to use as the display title.").addText(t=>t.setPlaceholder("title").setValue(this.plugin.settings.propertyKey).onChange(async i=>{this.plugin.settings.propertyKey=i.trim()||"title",await this.plugin.saveData(this.plugin.settings),this.plugin.updateLinkSuggester()})),new m.Setting(e).setName("When linking notes").setDesc("Enable property-based titles in the link suggester.").addToggle(t=>t.setValue(this.plugin.settings.enableForLinking).onChange(async i=>{this.plugin.settings.enableForLinking=i,await this.plugin.saveData(this.plugin.settings),this.plugin.updateLinkSuggester()})),new m.Setting(e).setName("In Quick Switcher").setDesc("Enable property-based titles in the quick switcher.").addToggle(t=>t.setValue(this.plugin.settings.enableForQuickSwitcher).onChange(async i=>{let n=this.plugin.settings.enableForQuickSwitcher;this.plugin.settings.enableForQuickSwitcher=i,await this.plugin.saveSettings(n)})),new m.Setting(e).setName("Include filename in fuzzy searches").setDesc("Include note filenames in fuzzy search results for link suggester and quick switcher.").addToggle(t=>t.setValue(this.plugin.settings.includeFilenameInSearch).onChange(async i=>{this.plugin.settings.includeFilenameInSearch=i,await this.plugin.saveData(this.plugin.settings)})),new m.Setting(e).setName("Include aliases in fuzzy searches").setDesc("Include property aliases in fuzzy search results for link suggester and quick switcher.").addToggle(t=>t.setValue(this.plugin.settings.includeAliasesInSearch).onChange(async i=>{this.plugin.settings.includeAliasesInSearch=i,await this.plugin.saveData(this.plugin.settings)})),new m.Setting(e).setName("When dragging notes").setDesc("Use property-based titles when dragging notes from the file explorer.").addToggle(t=>t.setValue(this.plugin.settings.enableForDragDrop).onChange(async i=>{this.plugin.settings.enableForDragDrop=i,await this.plugin.saveData(this.plugin.settings)}))}};var b=class extends u.Plugin{async onload(){await this.loadSettings(),setTimeout(()=>{this.updateLinkSuggester(),this.updateQuickSwitcher()},1e3),this.registerEvent(this.app.vault.on("modify",t=>{t instanceof u.TFile&&t.extension==="md"&&this.invalidateCache(t)})),this.registerEvent(this.app.vault.on("rename",(t,i)=>{t instanceof u.TFile&&t.extension==="md"&&this.invalidateCache(t)})),this.registerEvent(this.app.vault.on("delete",t=>{t instanceof u.TFile&&t.extension==="md"&&this.invalidateCache(t)})),this.registerEvent(this.app.metadataCache.on("changed",t=>{t instanceof u.TFile&&t.extension==="md"&&this.rebuildCache()})),this.registerEvent(this.app.metadataCache.on("resolved",()=>{this.rebuildCache()})),this.registerEvent(this.app.workspace.on("editor-drop",(t,i)=>{this.settings.enableForDragDrop&&this.handleDragDrop(t,i)})),this.registerDomEvent(document,"drop",t=>{this.settings.enableForDragDrop&&this.handleDOMDrop(t)}),u.Platform.isMobile&&this.registerEvent(this.app.workspace.on("quick-preview",(t,i)=>{if(this.settings.enableForQuickSwitcher)return new k(this.app,this).open(),!1})),this.addCommand({id:"open-quick-switcher",name:"Open Quick Switcher (Property-based)",callback:()=>{new k(this.app,this).open()}});let e=this.app.commands.commands["switcher:open"];e&&(this.originalSwitcherCallback=e.callback,e.callback=()=>{var t;this.settings.enableForQuickSwitcher?(document.querySelectorAll(".modal").forEach(n=>{n instanceof HTMLElement&&n.style.display!=="none"&&(n.style.display="none")}),new k(this.app,this).open()):(t=this.originalSwitcherCallback)==null||t.call(this)}),this.addCommand({id:"toggle-linking",name:"Toggle property-based linking",callback:async()=>{this.settings.enableForLinking=!this.settings.enableForLinking,await this.saveData(this.settings),this.updateLinkSuggester(),new u.Notice(`Property-based linking ${this.settings.enableForLinking?"enabled":"disabled"}`)}}),this.addCommand({id:"toggle-quick-switcher",name:"Toggle property-based Quick Switcher",callback:async()=>{let t=this.settings.enableForQuickSwitcher;this.settings.enableForQuickSwitcher=!this.settings.enableForQuickSwitcher,await this.saveSettings(t),new u.Notice(`Property-based Quick Switcher ${this.settings.enableForQuickSwitcher?"enabled":"disabled"}`)}}),this.addCommand({id:"rebuild-cache",name:"Rebuild file cache",callback:()=>{this.rebuildCache(),new u.Notice("File cache rebuilt")}}),this.addCommand({id:"toggle-drag-drop",name:"Toggle property-based drag and drop",callback:async()=>{this.settings.enableForDragDrop=!this.settings.enableForDragDrop,await this.saveData(this.settings),new u.Notice(`Property-based drag and drop ${this.settings.enableForDragDrop?"enabled":"disabled"}`)}}),setTimeout(()=>{this.addSettingTab(new C(this.app,this))},1500)}invalidateCache(e){this.suggest&&this.suggest.updateFileCache(e)}rebuildCache(){this.suggest&&this.suggest.buildFileCache()}handleDragDrop(e,t){if(!e.dataTransfer||!e.dataTransfer.files.length)return;let i=e.dataTransfer.getData("text/plain");if(!i||!i.endsWith(".md"))return;let n=this.app.vault.getAbstractFileByPath(i);if(!n||!(n instanceof u.TFile))return;let s=this.app.metadataCache.getFileCache(n),r=s==null?void 0:s.frontmatter,a=n.basename;if(r&&r[this.settings.propertyKey]!==void 0&&r[this.settings.propertyKey]!==null){let o=String(r[this.settings.propertyKey]).trim();o!==""&&(a=o)}setTimeout(()=>{this.replaceLastInsertedLink(n,a,t)},50)}handleDOMDrop(e){var l;let t=e.target;if(!t||!t.closest(".cm-editor"))return;let i=(l=e.dataTransfer)==null?void 0:l.getData("text/plain");if(!i)return;let n=i;if(i.startsWith("obsidian://open?")){let p=new URL(i).searchParams.get("file");if(p)n=decodeURIComponent(p)+".md";else return}else if(!i.endsWith(".md"))return;let s=this.app.vault.getAbstractFileByPath(n);if(!s||!(s instanceof u.TFile))return;let r=this.app.metadataCache.getFileCache(s),a=r==null?void 0:r.frontmatter,o=s.basename;if(a&&a[this.settings.propertyKey]!==void 0&&a[this.settings.propertyKey]!==null){let c=String(a[this.settings.propertyKey]).trim();c!==""&&(o=c)}setTimeout(()=>{let c=this.app.workspace.getActiveViewOfType(u.MarkdownView);c&&c.editor&&this.replaceLastInsertedLink(s,o,c.editor)},50)}replaceLastInsertedLink(e,t,i){let n=i.getValue(),s=i.getCursor(),a=n.split(`
`)[s.line],o=/\[\[([^\]]+)\]\]/g,l=/\[([^\]]+)\]\(([^)]+)\)/g,c,p=null;for(;(c=o.exec(a))!==null;)p=c;if(p){let y=`[[${p[1]}|${t}]]`,x={line:s.line,ch:p.index},T={line:s.line,ch:p.index+p[0].length};i.replaceRange(y,x,T);return}for(l.lastIndex=0;(c=l.exec(a))!==null;)p=c;if(p){let f=p[1],y=p[2],x=`[${t}](${y})`,T={line:s.line,ch:p.index},I={line:s.line,ch:p.index+p[0].length};i.replaceRange(x,T,I)}}updateLinkSuggester(){let e=this.app.workspace.editorSuggest;e&&(this.suggest&&(e.suggests=e.suggests.filter(t=>t!==this.suggest),this.suggest=void 0),this.settings.enableForLinking&&(this.suggest=new F(this),this.registerEditorSuggest(this.suggest),e.suggests=e.suggests.filter(t=>!t.constructor.name.includes("LinkSuggest")),e.suggests.unshift(this.suggest)))}updateQuickSwitcher(){}onunload(){let e=this.app.workspace.editorSuggest;e&&this.suggest&&(e.suggests=e.suggests.filter(i=>i!==this.suggest));let t=this.app.commands.commands["switcher:open"];if(t&&this.originalSwitcherCallback&&(t.callback=this.originalSwitcherCallback),this.originalQuickSwitcher){let i=this.app.workspace;i.openQuickSwitcher=this.originalQuickSwitcher}}async loadSettings(){this.settings=Object.assign({},L,await this.loadData())}async saveSettings(e){await this.saveData(this.settings),e!==void 0&&e!==this.settings.enableForQuickSwitcher&&this.updateQuickSwitcher()}};
